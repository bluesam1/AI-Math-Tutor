# Story 1.8: Problem Display Component

## Status

Draft

## Story

**As a** student,
**I want** to see my submitted problem displayed clearly on the left side of the interface,
**so that** I can reference it while working through the solution.

## Acceptance Criteria

1: The problem display component shows the submitted problem statement in the left panel of the side-by-side layout.

2: The problem text is displayed with clear typography and appropriate spacing, readable for 6th grade students.

3: The problem type is displayed (e.g., "Arithmetic" or "Algebra") as a label or badge near the problem statement.

4: The problem display persists throughout the session until a new problem is submitted (or session is reset).

5: The problem display area is visually distinct from the chat area, maintaining clear visual hierarchy.

6: The component handles long problem statements appropriately (wrapping text, scrolling if needed, maintaining readability).

7: The problem display is accessible via keyboard navigation and screen readers (appropriate ARIA labels).

8: The component is responsive and works effectively on desktop, tablet, and mobile browsers.

## Tasks / Subtasks

- [ ] Task 1: Update ProblemPanel Component (AC: 1, 2)
  - [ ] Update apps/web/src/components/ProblemPanel.tsx
  - [ ] Display problem statement with clear typography
  - [ ] Apply appropriate spacing for readability
  - [ ] Style problem text with Tailwind CSS
  - [ ] Ensure text is readable for 6th grade students

- [ ] Task 2: Add Problem Type Display (AC: 3)
  - [ ] Create problem type badge/label component
  - [ ] Display problem type near problem statement
  - [ ] Style problem type badge with Tailwind CSS
  - [ ] Use color coding for different problem types (optional)
  - [ ] Ensure problem type is clearly visible

- [ ] Task 3: Implement Problem State Persistence (AC: 4)
  - [ ] Ensure problem state persists in component state
  - [ ] Update problem display when new problem is submitted
  - [ ] Clear problem display when session is reset (future feature)
  - [ ] Maintain problem state across component re-renders

- [ ] Task 4: Enhance Visual Distinction (AC: 5)
  - [ ] Ensure ProblemPanel is visually distinct from ChatPanel
  - [ ] Use different background colors or borders
  - [ ] Maintain clear visual hierarchy
  - [ ] Ensure both panels are clearly separated

- [ ] Task 5: Handle Long Problem Statements (AC: 6)
  - [ ] Implement text wrapping for long problems
  - [ ] Add scrolling if problem is too long for panel
  - [ ] Maintain readability with appropriate line height
  - [ ] Test with various problem lengths

- [ ] Task 6: Add Accessibility Features (AC: 7)
  - [ ] Add ARIA labels to problem display area
  - [ ] Add ARIA attributes for problem type
  - [ ] Ensure keyboard navigation works
  - [ ] Test with screen reader (if available)
  - [ ] Add semantic HTML elements

- [ ] Task 7: Implement Responsive Design (AC: 8)
  - [ ] Test problem display on desktop
  - [ ] Test problem display on tablet
  - [ ] Test problem display on mobile
  - [ ] Ensure problem text is readable on all screen sizes
  - [ ] Adjust layout for smaller screens if needed

- [ ] Task 8: Integrate with Problem Validation (AC: 3)
  - [ ] Receive problem type from validation API (Story 1.7)
  - [ ] Display problem type when available
  - [ ] Handle cases where problem type is not available
  - [ ] Update problem display when validation completes

- [ ] Task 9: Create Problem Display Types (AC: 1, 3)
  - [ ] Create TypeScript types for problem display props
  - [ ] Define problem type enum or union type
  - [ ] Export types for use in components
  - [ ] Ensure types match backend validation response

- [ ] Task 10: Test Problem Display (AC: 1-8)
  - [ ] Test with short problem statements
  - [ ] Test with long problem statements
  - [ ] Test with different problem types
  - [ ] Test responsive behavior on different devices
  - [ ] Test accessibility features
  - [ ] Test problem persistence

## Dev Notes

### Previous Story Insights

**Story 1.2: React Frontend Shell**
- Side-by-side layout is established with ProblemPanel
- Tailwind CSS v4.1.16 is configured
- Layout is responsive

**Story 1.4: Text Input for Math Problems**
- Problem input is implemented
- Problem state is managed

**Story 1.7: Problem Validation & Type Identification**
- Problem validation endpoint is implemented
- Problem type is identified and returned

### Project Structure

The problem display component updates the existing frontend structure:

```
apps/web/src/
├── components/
│   ├── ProblemPanel.tsx        # UPDATED: Enhanced problem display
│   ├── ProblemTypeBadge.tsx   # NEW: Problem type badge component
│   ├── ProblemInput.tsx        # Already exists
│   └── ChatPanel.tsx           # Already exists
├── types/
│   └── problem.ts              # UPDATED: Add problem type definitions
└── App.tsx                     # Main app component
```

### Technology Stack Requirements

**Frontend Dependencies:**
- React: ^18.2.0 (already installed) [Source: architecture/tech-stack.md#Frontend Dependencies]
- React Hooks: useState (built-in)
- Tailwind CSS: v4.1.16 (already installed) [Source: architecture/tech-stack.md#Frontend Dependencies]

**No additional dependencies required** - using built-in React features and Tailwind CSS.

### Coding Standards

**Critical Rules:**
- TypeScript Only: All code must be TypeScript - `.tsx` for React components [Source: architecture/coding-standards.md#Critical Fullstack Rules]
- Functional Components: Use functional components with React Hooks [Source: architecture/coding-standards.md#Critical Fullstack Rules]
- Component Naming: PascalCase for components [Source: architecture/coding-standards.md#Naming Conventions]

**Styling Guidelines:**
- Use Tailwind CSS utility classes for all styling
- Maintain consistent spacing and typography
- Ensure age-appropriate design

### File Locations

**Component Files:**
- `apps/web/src/components/ProblemPanel.tsx` - Problem display component (UPDATED)
- `apps/web/src/components/ProblemTypeBadge.tsx` - Problem type badge (NEW)

**Type Files:**
- `apps/web/src/types/problem.ts` - Problem type definitions (UPDATED)
- `packages/shared/src/types/problem.ts` - Shared problem types (for frontend/backend)

### UI/UX Design

**Problem Display Design:**
- Clear, readable typography (appropriate font size for 6th grade)
- Generous spacing for readability
- Visual distinction from chat area
- Problem type badge/label clearly visible

**Problem Type Badge:**
- Color-coded badges for each problem type (optional)
- Clear labels: "Arithmetic", "Algebra", "Geometry", "Word Problems", "Multi-Step"
- Positioned near problem statement
- Age-appropriate styling

**Long Problem Handling:**
- Text wrapping for long problems
- Scrollable container if problem is too long
- Maintain line height and spacing for readability
- Ensure problem is fully visible (with scrolling)

### Problem Type Display

**Problem Type Categories:**
1. **Arithmetic:** Basic operations with numbers
2. **Algebra:** Variables and equations
3. **Geometry:** Shapes and measurements
4. **Word Problems:** Real-world scenarios
5. **Multi-Step:** Problems requiring multiple steps

**Badge Design:**
- Clear, readable labels
- Color coding (optional, for visual distinction)
- Consistent styling across all types
- Positioned prominently near problem statement

### State Management

**Component State:**
- `problemText` - Problem statement (string)
- `problemType` - Problem type (ProblemType | null)
- `isValidated` - Whether problem has been validated (boolean)

**State Flow:**
1. Problem submitted → updates `problemText`
2. Validation completes → updates `problemType` and `isValidated`
3. Problem display updates with text and type
4. Problem persists until new problem is submitted

### Accessibility

**Accessibility Requirements:**
- ARIA labels for problem display area
- ARIA attributes for problem type
- Semantic HTML elements (article, section)
- Keyboard navigation support
- Screen reader compatibility

**ARIA Attributes:**
- `aria-label="Math problem"` for problem display
- `aria-labelledby` for problem type
- `role="region"` for problem panel

### Responsive Design

**Responsive Breakpoints:**
- Desktop (> 1024px): Full side-by-side layout, problem display in left panel
- Tablet (768px - 1024px): Side-by-side with adjusted widths
- Mobile (< 768px): Stacked layout, problem display full width

**Responsive Considerations:**
- Problem text remains readable on all screen sizes
- Problem type badge remains visible
- Scrolling works properly on mobile devices
- Touch-friendly interaction on mobile

### Testing

**Testing Strategy:**
- Manual testing with various problem lengths
- Manual testing with different problem types
- Manual testing on different screen sizes
- Accessibility testing
- TypeScript compilation verification

**Test Scenarios:**
1. Display short problem → should show correctly
2. Display long problem → should wrap and scroll
3. Display problem with type → should show type badge
4. Test responsive behavior on mobile/tablet/desktop
5. Test accessibility with screen reader
6. Test problem persistence

**Test File Locations:**
- Component tests: `apps/web/tests/components/ProblemPanel.test.tsx` (to be created in later stories)

### Integration Points

**Current Story:**
- Displays problem text from ProblemInput (Story 1.4)
- Displays problem type from validation API (Story 1.7)
- Integrates with existing ProblemPanel component

**Future Stories:**
- Future epics: Problem display will be referenced during Socratic dialogue
- Problem type will guide dialogue approach

### Environment Variables

No environment variables required for this story.

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-XX | 1.0 | Story created | SM |

## Dev Agent Record

### Agent Model Used

_TBD - To be filled by Dev Agent_

### Debug Log References

_TBD - To be filled by Dev Agent_

### Completion Notes List

_TBD - To be filled by Dev Agent_

### File List

_TBD - To be filled by Dev Agent_

## QA Results

_TBD - To be filled by QA Agent_


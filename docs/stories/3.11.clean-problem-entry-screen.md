# Story 3.11: Clean Problem Entry Screen

## Status

Implementation Complete

## Story

**As a** student,
**I want** a clean, minimal problem entry screen that shows only the input,
**so that** I can focus on entering my problem without distractions, and the textbox automatically hides when I upload an image.

## Acceptance Criteria

1: The problem entry screen displays only the input field when no problem is set, with no extra headers, labels, or UI elements.

2: When an image is uploaded, the text input field is immediately hidden and remains hidden during processing (uploading, processing, validating).

3: The text input field only shows when no image is selected and no problem is set.

4: The image preview and processing states are shown when an image is uploaded, without the text input field visible.

5: The "Math Problem" header in ProblemPanel is hidden when there's no problem set (empty state).

6: The EmptyState component is removed when showing the input in the empty state, displaying only the input component.

7: The interface maintains a clean, minimal appearance during the problem entry phase.

8: All existing functionality (text input, image upload, validation, processing) continues to work correctly.

## Dev Agent Record

### Completion Notes

- All tasks completed successfully
- Textarea is hidden when image is uploaded and stays hidden during processing
- ProblemPanel empty state simplified to show only input
- Header labels conditionally hidden when image is uploaded
- Clean, minimal interface for problem entry

### File List

**Modified Files:**
- `apps/web/src/components/ProblemInput.tsx` - Hide textarea when image uploaded, conditionally hide header
- `apps/web/src/components/ProblemPanel.tsx` - Remove header and EmptyState in empty state

### Change Log

- 2025-01-XX: Initial implementation of clean problem entry screen

## Tasks / Subtasks

- [x] Task 1: Hide Textarea When Image is Uploaded (AC: 2, 3, 4)
  - [x] Update `ProblemInput.tsx` to conditionally hide textarea when `selectedFile` exists
  - [x] Ensure textarea stays hidden during processing states (`isUploading`, `isProcessing`, `isValidating`)
  - [x] Show only image preview and processing indicators when image is present
  - [x] Test image upload flow to verify textarea stays hidden

- [x] Task 2: Simplify ProblemPanel Empty State (AC: 1, 5, 6)
  - [x] Remove "Math Problem" header when `problem` is undefined
  - [x] Remove EmptyState wrapper when showing input
  - [x] Show only ProblemInput component in empty state
  - [x] Maintain clean, minimal appearance

- [x] Task 3: Clean Up ProblemInput UI (AC: 1, 7)
  - [x] Remove or conditionally hide header label when in minimal mode
  - [x] Simplify UI elements when image is uploaded
  - [x] Ensure clean, focused appearance for problem entry

- [x] Task 4: State Management Updates (AC: 2, 3, 4)
  - [x] Ensure textarea visibility is properly tied to `selectedFile` state
  - [x] Handle state transitions correctly (image upload → processing → validation)
  - [x] Test all state combinations to ensure correct UI behavior

- [x] Task 5: Testing and Validation (AC: 1-8)
  - [x] Test empty state shows only input
  - [x] Test text input entry flow
  - [x] Test image upload hides textarea immediately
  - [x] Test textarea stays hidden during processing
  - [x] Test all existing functionality still works
  - [x] Test responsive design on all devices
  - [x] Verify accessibility features still work

## Dependencies

- Story 1.8: Problem Display Component (ProblemPanel exists)
- Story 3.6: Final UI Polish & Error Handling (existing components)

## Required By

- Future enhancements for improved UX
- Story 3.5: Comprehensive Testing (clean entry screen should be tested)

## Notes

- **Minimal Design:** The goal is to create a super clean entry screen with minimal distractions
- **Image Priority:** When an image is uploaded, it takes precedence and the text input should be hidden
- **Processing States:** Textarea should remain hidden throughout the entire image processing workflow
- **Backward Compatibility:** All existing functionality must continue to work
- **Accessibility:** Clean UI should not compromise accessibility features

## Technical Considerations

- **Component State:** Textarea visibility should be controlled by `selectedFile` state in ProblemInput
- **Conditional Rendering:** Use conditional rendering to hide/show textarea based on image selection
- **State Transitions:** Handle state transitions smoothly (no flickering or layout shifts)
- **Processing States:** Ensure textarea stays hidden during all processing states (`isUploading`, `isProcessing`, `isValidating`)

## User Experience Considerations

- **Focus:** Clean, minimal interface helps students focus on entering their problem
- **Clarity:** Hiding textarea when image is uploaded reduces confusion about which input to use
- **Simplicity:** Removing extra headers and UI elements creates a less intimidating entry experience
- **Age-Appropriate:** Clean design is friendly and approachable for 6th grade students

